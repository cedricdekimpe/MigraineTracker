<div class="overflow-x-auto rounded-xl border border-slate-200 bg-white shadow-sm">
  <table class="min-w-full table-fixed">
    <thead>
      <tr>
        <th class="sticky left-0 bg-white px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">Attribute</th>
        <% days.each do |day| %>
          <% migraine = migraines_by_day[day] %>
          <th class="px-3 py-3 text-center text-xs font-semibold uppercase tracking-wide text-slate-500">
            <% if migraine %>
              <%= button_to day, edit_migraine_path(migraine, format: :turbo_stream), 
                  method: :get,
                  data: { turbo_frame: "migraine-modal" },
                  class: "inline-block cursor-pointer rounded border-0 bg-transparent px-2 py-1 font-semibold uppercase tracking-wide text-slate-500 transition hover:bg-emerald-100 hover:text-emerald-700" %>
            <% else %>
              <%= day %>
            <% end %>
          </th>
        <% end %>
      </tr>
    </thead>
    <tbody class="text-sm">
      <tr>
        <th scope="row" class="sticky left-0 bg-white px-4 py-3 text-left font-medium text-slate-700">Nature</th>
        <% days.each do |day| %>
          <% migraine = migraines_by_day[day] %>
          <td class="<%= migraine_cell_classes(day, month) %>" data-day="<%= day %>" data-attribute="nature"><%= migraine&.nature || "–" %></td>
        <% end %>
      </tr>
      <tr>
        <th scope="row" class="sticky left-0 bg-white px-4 py-3 text-left font-medium text-slate-700">Intensity</th>
        <% days.each do |day| %>
          <% migraine = migraines_by_day[day] %>
          <td class="<%= migraine_cell_classes(day, month) %>" data-day="<%= day %>" data-attribute="intensity"><%= migraine&.intensity || "–" %></td>
        <% end %>
      </tr>
      <tr>
        <th scope="row" class="sticky left-0 bg-white px-4 py-3 text-left font-medium text-slate-700">Menstrual cycle</th>
        <% days.each do |day| %>
          <% migraine = migraines_by_day[day] %>
          <td class="<%= migraine_cell_classes(day, month) %>" data-day="<%= day %>" data-attribute="cycle"><%= migraine.nil? ? "–" : (migraine.on_period? ? "Yes" : "No") %></td>
        <% end %>
      </tr>
      <tr>
        <th scope="row" class="sticky left-0 bg-white px-4 py-3 text-left font-medium text-slate-700">Medication</th>
        <% days.each do |day| %>
          <% migraine = migraines_by_day[day] %>
          <td class="<%= migraine_cell_classes(day, month) %>" data-day="<%= day %>" data-attribute="medication"><%= medication_display(migraine) %></td>
        <% end %>
      </tr>
    </tbody>
  </table>
</div>
